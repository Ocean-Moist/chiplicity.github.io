.. metadata-placeholder 

   :DC.Title:
      Pan-European Monitoring System -
      Background information on the use of PlantUML in reStructuredText and Sphinx
   :DC.Creator:
      Nery, Fernanda
   :DC.Date:
      2013-10-01
   :DC.Description:
      Examples of UML diagrams and their PlantUML code,
      adapted from http://plantuml.sourceforge.net/.
   :DC.Language:
      en
   :DC.Format:
      text/x-rst
   :DC.Rights:
      Public.
   :DC.RightsHolder:
      See http://plantuml.sourceforge.net/


Class diagram
=============

Diagram
-------

This is the diagram generated by the Sphinx PlantUML extension.

.. begin-class-diagram-example

.. uml::

      @startuml
      
      'style options 
      skinparam monochrome true
      skinparam circledCharacterRadius 0
      skinparam circledCharacterFontSize 0
      skinparam classAttributeIconSize 0
      hide empty members
      
      Class01 <|-- Class02
      Class03 *-- Class04
      Class05 o-- Class06
      Class07 .. Class08
      Class09 -- Class10
      
      @enduml

.. end-class-diagram-example

Code
----

This is the code for example above.

.. literalinclude:: PlantUMLExamples.exc.rst
   :language: rst
   :start-after: begin-class-diagram-example
   :end-before: end-class-diagram-example

Note that in docutils / Sphinx, ``@startuml`` and ``@enduml`` could be omitted.
However, it is useful to keep these lines: is necessary, PlantUML can be used
(outside Sphinx) to generate the PNG image files with the diagrams directly
from the text file; also, if editing the code in Eclipse, the PlantUML diagrams
can be previewed without the necessity of building the documentation.

Image
-----

The image was exported using the Eclipse PlantUML plug-in.
It it static, but can be resized...

.. image:: img/classDiagram-Relations.png
   :width: 30%

Other examples
--------------

.. begin-car-example

.. uml::

      @startuml
      
      'style options 
      skinparam monochrome true
      skinparam circledCharacterRadius 0
      skinparam circledCharacterFontSize 0
      skinparam classAttributeIconSize 0
      hide empty members
      
      class Car
      
      Driver - Car : drives >
      Car *- Wheel : have 4 >
      Car -- Person : < owns
      
      @enduml

.. end-car-example

.. literalinclude:: PlantUMLExamples.exc.rst
   :language: rst
   :start-after: begin-car-example
   :end-before: end-car-example

To declare fields and methods, you can use the symbol ":" followed by the field's or method's name.
The system checks for parenthesis to choose between methods and fields.

.. begin-fields-and-methods-example

.. uml::

      @startuml
      
      'style options 
      skinparam monochrome true
      skinparam circledCharacterRadius 9
      skinparam circledCharacterFontSize 8
      skinparam classAttributeIconSize 0
      hide empty members

      abstract class AbstractClass {
        - privateField
        + publicField
        # protectedField
        ~ packagePrivateField
        - privateMethod()
        + publicMethod()
        # protectedMethod()
        ~ packagePrivateMethod()
         }
  
      class Dummy {
        {static} staticID
        {abstract} void methods()
         }
      
      class Flight {
         flightNumber : Integer
         departureTime : Date
         }
      
      package "Classic Collections" {
         
         abstract class AbstractList
         abstract AbstractCollection
         interface List
         interface Collection
         
         List <|-- AbstractList
         Collection <|-- AbstractCollection
         
         Collection <|- List
         AbstractCollection <|- AbstractList
         AbstractList <|-- ArrayList
         
         class ArrayList {
           Object[] elementData
           size()
            } 
      }
      
      enum TimeUnit {
        DAYS
        HOURS
        MINUTES
      }
        

      class Student {
        Name
      }
      Student "0..*" -- "1..*" Course
      (Student, Course) .. Enrollment
      
      class Enrollment {
        drop()
        cancel()
      }

      @enduml

.. end-fields-and-methods-example

.. literalinclude:: PlantUMLExamples.exc.rst
   :language: rst
   :start-after: begin-fields-and-methods-example
   :end-before:  end-fields-and-methods-example

Use case diagram
================

Code
----


Diagram
-------

This is generated by the Sphinx PlantUML extension.

.. begin-use-case-diagram-example

.. uml::

   @startuml
   actor "Main Database" as DB << Application >>
   
   note left of DB
      This actor 
      has a "name with spaces",
      an alias
      and a stereotype 
   end note
   
   actor User << Human >>
   actor SpecialisedUser
   actor Administrator
   
   User <|--- SpecialisedUser
   User <|--- Administrator
   
   usecase (Use the application) as (Use) << Main >>
   usecase (Configure the application) as (Config)
   Use ..> Config : <<includes>>
   
   User --> Use
   DB --> Use
   
   Administrator --> Config 
   
   note "This note applies to\nboth actors." as MyNote
   MyNote .. Administrator
   MyNote .. SpecialisedUser
   
   '  this is a text comment and won't be displayed
   AnotherActor ---> (AnotherUseCase)
   
   '  to increase the length of the edges, just add extras dashes, like this:
   ThirdActor ----> (LowerCase)
   
   '  The direction of the edge can also be reversed, like this:
   (UpperCase) <---- FourthActor
   
   @enduml

.. end-use-case-diagram-example

Code
----

.. literalinclude:: PlantUMLExamples.exc.rst
   :language: rst
   :start-after: begin-use-case-diagram-example
   :end-before: end-use-case-diagram-example

Image
-----

The image was exported using the Eclipse PlantUML plug-in.
It it static, but can be resized...

.. image:: img/useCaseDiagram.png
   :width: 30%

Activity diagram (new syntax)
=============================

Diagram
-------

.. begin-activity-diagram-example

.. uml::

   @startuml
   
   start
   
   :first activity;
   
   :second activity
    with a multiline 
    and rather long description;
   
   :another activity;
   
   note right
     After this activity,
     are two 'if-then-else' examples. 
   end note
   
   if (do optional activity?) then (yes)
      :optional activity;
   else (no)
   
      if (want to exit?) then (right now!)
         stop
      else (not really)
      
      endif
   
   endif   
      
   :third activity;
   
   note left
     After this activity,
     parallel activities will occur. 
   end note
   
   fork
      :Concurrent activity A;
   fork again
      :Concurrent activity B1;
      :Concurrent activity B2;
   fork again
      :Concurrent activity C;
      fork
      :Nested C1;
      fork again
      :Nested C2;
      end fork
   end fork
   
   repeat 
      :repetitive activity;
   repeat while (again?)
   
   while (continue?) is (yes, of course)
     :first activity inside the while loop;
     :second activity inside the while loop;
   endwhile (no)
   
   stop
   
   @enduml

.. end-activity-diagram-example

Code
----

There are two syntaxes to create activity diagrams.
The example utilises the new syntax (which is still incomplete).

.. literalinclude:: PlantUMLExamples.exc.rst
   :language: rst
   :start-after: begin-activity-diagram-example
   :end-before: end-activity-diagram-example
   
Image
-----

The image was exported using the Eclipse PlantUML plug-in.
It it static, but can be resized...

.. image:: img/activityDiagram.png
   :width: 30%



State diagram
=============

Diagram
-------

Generated by the Sphinx PlantUML extension.

.. begin-state-diagram-example

.. uml::

   @startuml
   
   [*] --> MyState
   MyState --> CompositeState
   MyState --> AnotherCompositeState
   MyState --> WrongState
   
   CompositeState --> CompositeState : \ this is a loop   
   AnotherCompositeState --> [*]
   CompositeState --> [*]
   
   MyState : this is a string
   MyState : this is another string
   
   state CompositeState {
   
   [*] --> StateA : begin something
   StateA --> StateB : from A to B
   StateB --> StateA : from B back to A
   StateB --> [*] : end it

   CompositeState : yet another string
   }

   state AnotherCompositeState {
   
   [*] --> ConcurrentStateA    
   ConcurrentStateA --> ConcurrentStateA 
   
   --
   
   [*] --> ConcurrentStateB
   ConcurrentStateB --> ConcurrentStateC
   ConcurrentStateC --> ConcurrentStateB
   }
      
   note left of WrongState
      This state 
      is a dead-end
      and shouldn't
      exist.
   end note
   
   @enduml

.. end-state-diagram-example

Code
----

.. literalinclude:: PlantUMLExamples.exc.rst
   :language: rst
   :start-after: begin-state-diagram-example
   :end-before: end-state-diagram-example

Image
-----

The image was exported using the Eclipse PlantUML plug-in.
It it static, but can be resized...

.. image:: img/stateDiagram.png
   :width: 30%
   
   
GUI mockups
===========

PlantUML can also be used for GUI mockups (see http://plantuml.sourceforge.net/salt.html).

Example
-------

.. begin-mockup-example1

.. uml::

   @startuml
   salt
   {
     Just plain text
     [This is my button]
     ()  Unchecked radio
     (X) Checked radio
     []  Unchecked box
     [X] Checked box
     "Enter text here   "
     ^This is a droplist^
   }
   @enduml
      
.. end-mockup-example1

Code
----

.. literalinclude:: PlantUMLExamples.exc.rst
   :language: rst
   :start-after: begin-mockup-example1
   :end-before: end-mockup-example1